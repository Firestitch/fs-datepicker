<div class="fs-date-picker-backdrop" [hidden]="!parentInstance.opened" (click)="close($event)"></div>

<div class="fs-date-picker-dialog fs-date-picker-range dialog-view-{{ fsDatePickerModel.view }}" tabindex="0"
[ngClass]="{ opened: parentInstance.opened,
  'has-date': (fsDatePickerModel.components.calendarStart || fsDatePickerModel.components.calendarEnd),
  'has-time': (fsDatePickerModel.components.timeStart || fsDatePickerModel.components.timeEnd),
  'has-view-date': (fsDatePickerModel.view === 'date' || fsDatePickerModel.view === 'datetime'),
  'has-view-time': (fsDatePickerModel.view === 'time' || fsDatePickerModel.view === 'datetime') }">
  <div class="wrap">

    <div class="header">
      <fs-date-picker-summary
      [startDate]="parentInstance.ngModelStart"
      [endDate]="parentInstance.ngModelEnd"
      (componentsChange)="setComponents($event)"
      ></fs-date-picker-summary>
      <!--
      <fs-date-picker-presets
      *ngIf="!fsDatePickerModel.components.timeStart && !fsDatePickerModel.components.timeEnd"
      (datesChange)="onDatesChange($event)"
      ></fs-date-picker-presets>
      -->
    </div>

    <div class="date-time">
      <div class="date-range">
          <fs-date-picker-calendar
          *ngIf="fsDatePickerModel.components.calendarStart"
          [date]="parentInstance.ngModelStart"
          [highlightStartDate]="highlightStartDate"
          [highlightEndDate]="highlightEndDate"
          [dateMode]="fsDatePickerModel.dateMode.start_date"
          [drawMonth]="startCalendarMonth"
          (onChange)="setStartDate($event)"
          (onDateModeChange)="setDateModeStart($event)"
          (onDrawMonth)="startCalendarDrawMonth($event)"
          (hoverDay)="hoverCalendar($event)"
          (mouseLeaveCalendar)="onMouseLeaveCalendar($event)"
          ></fs-date-picker-calendar>

          <fs-date-picker-calendar
          *ngIf="fsDatePickerModel.components.calendarEnd"
          [date]="parentInstance.ngModelEnd"
          [highlightStartDate]="highlightStartDate"
          [highlightEndDate]="highlightEndDate"
          [dateMode]="fsDatePickerModel.dateMode.end_date"
          [disabledDays]="toDisabledDays"
          [drawMonth]="endCalendarMonth"
          (onChange)="setEndDate($event)"
          (onDateModeChange)="setDateModeEnd($event)"
          (onDrawMonth)="endCalendarDrawMonth($event)"
          (hoverDay)="hoverCalendar($event)"
          (mouseLeaveCalendar)="onMouseLeaveCalendar($event)"
          ></fs-date-picker-calendar>
      </div>

      <div class="time-range">
        <fs-date-picker-time
          *ngIf="fsDatePickerModel.components.timeStart"
          [date]="parentInstance.ngModelStart"
          (onChange)="setStartTime($event)"
        ></fs-date-picker-time>
        <fs-date-picker-time
          *ngIf="fsDatePickerModel.components.timeEnd"
          [date]="parentInstance.ngModelEnd"
          [disabledTimes]="toDisabledTimes"
          (onChange)="setEndTime($event)"
        ></fs-date-picker-time>
      </div>

    </div>

    <div class="done">
      <button type="button" mat-raised-button color="primary" (click)="close($event)">Done</button>
    </div>
  </div>
</div>
